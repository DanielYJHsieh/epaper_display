# Server with Web UI - ä½¿ç”¨èªªæ˜

## âœ… ç‰¹é»

**å®Œå…¨å‘å¾Œç›¸å®¹** + **æ–°å¢ Web UI**

- âœ… **åœ¨ PC ä¸ŠåŸ·è¡Œ** - Windows/Linux/Mac éƒ½å¯ä»¥
- âœ… **åœ¨æ‰‹æ©Ÿä¸ŠåŸ·è¡Œ** - Android (Termux) / iOS (iSH)
- âœ… **åœ–å½¢ç•Œé¢** - ç¶²é æ§åˆ¶ï¼ˆport 8080ï¼‰
- âœ… **å‘½ä»¤åˆ—** - åŸæœ‰äº’å‹•æ¨¡å¼ä¿ç•™
- âœ… **ç„¡éœ€é¡å¤–å®‰è£** - åªéœ€ `aiohttp` å¥—ä»¶

---

## ğŸ“¦ å®‰è£ä¾è³´

### PC (Windows/Linux/Mac)

```bash
# å·²æœ‰çš„ä¾è³´
pip install websockets pillow numpy

# æ–°å¢ï¼šWeb UI éœ€è¦
pip install aiohttp
```

### æ‰‹æ©Ÿ (Termux)

```bash
pkg install python
pip install websockets pillow numpy aiohttp
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### æ–¹æ³• 1ï¼šä½¿ç”¨ Web UIï¼ˆæ¨è–¦ï¼‰

**Step 1: å•Ÿå‹• Server**
```bash
cd server
python server_with_webui.py
```

**Step 2: æŸ¥çœ‹è¼¸å‡º**
```
WebSocket Server å•Ÿå‹•: ws://0.0.0.0:8266
HTTP Server å•Ÿå‹•: http://0.0.0.0:8080

ğŸŒ ç¶²é æ§åˆ¶ä»‹é¢:
   æœ¬æ©Ÿå­˜å–: http://localhost:8080
   ç¶²è·¯å­˜å–: http://192.168.0.100:8080

ğŸ’¡ ESP8266 è¨­å®š:
   #define SERVER_HOST "192.168.0.100"
   #define SERVER_PORT 8266
```

**Step 3: é–‹å•Ÿç€è¦½å™¨**

- **PC**: é–‹å•Ÿ `http://localhost:8080`
- **æ‰‹æ©Ÿ**: é–‹å•Ÿ `http://192.168.0.100:8080` (ä½¿ç”¨é¡¯ç¤ºçš„ IP)
- **åŒç¶²æ®µå…¶ä»–è¨­å‚™**: ä½¿ç”¨ç¶²è·¯ IP

**Step 4: ä½¿ç”¨ç¶²é ä»‹é¢**

1. æŸ¥çœ‹ ESP8266 é€£æ¥ç‹€æ…‹
2. é»æ“Šã€Œé¸æ“‡åœ–ç‰‡ã€
3. é¸æ“‡è¦é¡¯ç¤ºçš„åœ–ç‰‡
4. é»æ“Šã€Œå‚³é€åˆ°é¡¯ç¤ºå™¨ã€
5. ç­‰å¾…å®Œæˆï¼ˆç´„ 1 åˆ†é˜ï¼‰

**Step 5: å…¶ä»–åŠŸèƒ½**

- **å‚³é€æ¸¬è©¦åœ–æ¡ˆ**: é»æ“Šã€Œå‚³é€æ¸¬è©¦åœ–æ¡ˆã€
- **æ¸…é™¤è¢å¹•**: é»æ“Šã€Œæ¸…é™¤è¢å¹•ã€

---

### æ–¹æ³• 2ï¼šä½¿ç”¨å‘½ä»¤åˆ—ï¼ˆåŸæœ‰æ–¹å¼ï¼‰

Server å•Ÿå‹•å¾Œï¼Œåœ¨å‘½ä»¤åˆ—è¼¸å…¥ï¼š

```bash
>>> clients          # æŸ¥çœ‹é€£æ¥çš„è¨­å‚™
>>> test             # ç™¼é€æ¸¬è©¦åœ–æ¡ˆ
>>> clear            # æ¸…é™¤è¢å¹•
>>> tile image.png   # ç™¼é€åœ–ç‰‡
>>> web              # é¡¯ç¤ºç¶²é é€£çµ
>>> quit             # çµæŸç¨‹å¼
```

---

## ğŸ“± æ‰‹æ©Ÿ (Termux) å®Œæ•´æµç¨‹

### Step 1: å®‰è£ Termux
```
Google Play Store â†’ æœå°‹ "Termux" â†’ å®‰è£ï¼ˆå…è²»ï¼‰
```

### Step 2: è¨­å®šç’°å¢ƒ
```bash
# æ›´æ–°å¥—ä»¶
pkg update && pkg upgrade

# å®‰è£ä¾è³´
pkg install python git
pip install websockets pillow numpy aiohttp
```

### Step 3: ä¸‹è¼‰å°ˆæ¡ˆ
```bash
# æ–¹æ³• A: ä½¿ç”¨ Git
cd ~
git clone https://github.com/DanielYJHsieh/epaper_display.git
cd epaper_display/wifi_spi_display/server

# æ–¹æ³• B: æ‰‹å‹•è¤‡è£½
# å°‡ server è³‡æ–™å¤¾è¤‡è£½åˆ°æ‰‹æ©Ÿ
# ä½¿ç”¨æª”æ¡ˆç®¡ç†å™¨æ”¾åˆ° Termux å¯å­˜å–çš„ä½ç½®
```

### Step 4: åŸ·è¡Œ
```bash
python server_with_webui.py
```

### Step 5: ä½¿ç”¨

**åœ¨æ‰‹æ©Ÿä¸Šï¼š**
- é–‹å•Ÿç€è¦½å™¨ï¼ˆChrome/Firefoxï¼‰
- è¼¸å…¥ `http://localhost:8080`
- å¾ç›¸ç°¿é¸æ“‡åœ–ç‰‡ä¸¦å‚³é€

**å¾å…¶ä»–è¨­å‚™ï¼š**
- ä½¿ç”¨ Termux é¡¯ç¤ºçš„ IPï¼ˆä¾‹å¦‚ `http://192.168.0.100:8080`ï¼‰
- å¯ä»¥å¾é›»è…¦ç€è¦½å™¨æ§åˆ¶æ‰‹æ©Ÿä¸Šçš„ Server

### Step 6: èƒŒæ™¯åŸ·è¡Œï¼ˆå¯é¸ï¼‰

å®‰è£ tmux è®“ Server åœ¨èƒŒæ™¯é‹è¡Œï¼š

```bash
# å®‰è£ tmux
pkg install tmux

# å•Ÿå‹• tmux session
tmux new -s epaper

# åŸ·è¡Œ server
python server_with_webui.py

# é›¢é–‹ä½†ä¿æŒé‹è¡Œï¼šæŒ‰ Ctrl+B ç„¶å¾ŒæŒ‰ D

# é‡æ–°é€£æ¥
tmux attach -t epaper
```

---

## ğŸ–¥ï¸ PC ä½¿ç”¨

### Windows

```powershell
# å•Ÿå‹•
cd D:\1_myproject\epaper_display\epaper_display\wifi_spi_display\server
python server_with_webui.py

# é–‹å•Ÿç€è¦½å™¨
start http://localhost:8080
```

### Linux/Mac

```bash
# å•Ÿå‹•
cd ~/epaper_display/wifi_spi_display/server
python server_with_webui.py

# é–‹å•Ÿç€è¦½å™¨
xdg-open http://localhost:8080  # Linux
open http://localhost:8080      # Mac
```

---

## ğŸŒ ç¶²é ç•Œé¢åŠŸèƒ½

### ç‹€æ…‹é¡¯ç¤º

- ğŸ–¥ï¸ **Server ç‹€æ…‹**: é‹è¡Œä¸­/åœæ­¢
- ğŸ“¡ **WebSocket Port**: 8266
- ğŸŒ **HTTP Port**: 8080
- ğŸ“± **å·²é€£æ¥è¨­å‚™**: é¡¯ç¤º ESP8266 æ•¸é‡
- âš¡ **ç•¶å‰ç‹€æ…‹**: å¾…å‘½/è™•ç†ä¸­/å‚³é€ä¸­/å®Œæˆ

### åœ–ç‰‡ä¸Šå‚³

- ğŸ“ **é¸æ“‡åœ–ç‰‡**: é»æ“Šå€åŸŸé¸æ“‡æª”æ¡ˆ
- ğŸ‘ï¸ **é è¦½**: è‡ªå‹•é¡¯ç¤ºé¸æ“‡çš„åœ–ç‰‡
- ğŸ“¤ **å‚³é€**: è™•ç†ä¸¦å‚³é€åˆ° ESP8266

### æ“ä½œæŒ‰éˆ•

- ğŸ¨ **å‚³é€æ¸¬è©¦åœ–æ¡ˆ**: æ£‹ç›¤æ ¼æ¸¬è©¦åœ–
- ğŸ—‘ï¸ **æ¸…é™¤è¢å¹•**: æ¸…ç©ºé¡¯ç¤ºå™¨
- ğŸ“Š **å³æ™‚æ›´æ–°**: æ¯ 2 ç§’æ›´æ–°ç‹€æ…‹

---

## ğŸ”§ è¨­å®š ESP8266

ä¿®æ”¹ `client_esp8266/config.h`ï¼š

```cpp
// ä½¿ç”¨ PC çš„ IP
#define SERVER_HOST "192.168.0.100"  // PC çš„ IP

// ä½¿ç”¨æ‰‹æ©Ÿçš„ IP
#define SERVER_HOST "192.168.0.200"  // æ‰‹æ©Ÿçš„ IP

// Port ä¸è®Š
#define SERVER_PORT 8266
```

### å¦‚ä½•å–å¾— IPï¼Ÿ

**PC (Windows)**:
```cmd
ipconfig
# æŸ¥çœ‹ "IPv4 ä½å€"
```

**PC (Linux/Mac)**:
```bash
ifconfig
# æˆ–
ip addr show
```

**æ‰‹æ©Ÿ (Termux)**:
```bash
ifconfig wlan0
# æˆ–
ip addr show wlan0
```

**è‡ªå‹•é¡¯ç¤º**:
Server å•Ÿå‹•å¾Œæœƒè‡ªå‹•é¡¯ç¤ºæœ¬æ©Ÿ IP

---

## ğŸ“Š åŠŸèƒ½å°æ¯”

| åŠŸèƒ½ | åŸ server.py | server_with_webui.py |
|-----|-------------|---------------------|
| WebSocket Server | âœ… | âœ… |
| å‘½ä»¤åˆ—æ“ä½œ | âœ… | âœ… |
| ç¶²é ç•Œé¢ | âŒ | âœ… |
| åœ–ç‰‡ä¸Šå‚³ | âŒ | âœ… |
| ç‹€æ…‹ç›£æ§ | âŒ | âœ… |
| æ‰‹æ©Ÿå‹å–„ | âŒ | âœ… |
| PC åŸ·è¡Œ | âœ… | âœ… |
| Termux åŸ·è¡Œ | âœ… | âœ… |

---

## ğŸ’¡ ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1: PC é–‹ç™¼æ¸¬è©¦
```
åœ¨ PC åŸ·è¡Œ server_with_webui.py
ESP8266 é€£æ¥åˆ° PC
ç”¨ç€è¦½å™¨æ§åˆ¶ (http://localhost:8080)
```

### å ´æ™¯ 2: æ‰‹æ©Ÿç¨ç«‹é‹ä½œ
```
æ‰‹æ©Ÿ Termux åŸ·è¡Œ server_with_webui.py
ESP8266 é€£æ¥åˆ°æ‰‹æ©Ÿ
ç”¨æ‰‹æ©Ÿç€è¦½å™¨æ§åˆ¶ (http://localhost:8080)
å¾ç›¸ç°¿é¸åœ–ä¸¦å‚³é€
```

### å ´æ™¯ 3: é ç«¯æ§åˆ¶
```
æ‰‹æ©ŸåŸ·è¡Œ server_with_webui.py
ESP8266 é€£æ¥åˆ°æ‰‹æ©Ÿ
é›»è…¦ç€è¦½å™¨æ§åˆ¶ (http://192.168.0.200:8080)
```

### å ´æ™¯ 4: å±•ç¤º/Demo
```
æ‰‹æ©Ÿç†±é»æ¨¡å¼
æ‰‹æ©ŸåŸ·è¡Œ Server
ESP8266 é€£æ¥æ‰‹æ©Ÿç†±é»
ç”¨æ‰‹æ©Ÿæˆ–å¹³æ¿æ§åˆ¶
å®Œå…¨ç¨ç«‹ï¼Œç„¡éœ€ WiFi è·¯ç”±å™¨
```

---

## ğŸ¨ ç¶²é ç•Œé¢æˆªåœ–èªªæ˜

### ä¸»ç•«é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“± ESP8266 é›»å­ç´™é¡¯ç¤ºå™¨         â”‚
â”‚ Web æ§åˆ¶ä»‹é¢ v1.7.1             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç‹€æ…‹å¡ç‰‡                         â”‚
â”‚ â€¢ Server ç‹€æ…‹: é‹è¡Œä¸­           â”‚
â”‚ â€¢ WebSocket: Port 8266          â”‚
â”‚ â€¢ HTTP Server: Port 8080        â”‚
â”‚ â€¢ å·²é€£æ¥è¨­å‚™: 1                 â”‚
â”‚ â€¢ ç‹€æ…‹: å¾…å‘½ä¸­                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é¸æ“‡åœ–ç‰‡                         â”‚
â”‚ [é»æ“Šé¸æ“‡åœ–ç‰‡å€åŸŸ]              â”‚
â”‚ [åœ–ç‰‡é è¦½]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ“ä½œ                            â”‚
â”‚ [ğŸ“¤ å‚³é€åˆ°é¡¯ç¤ºå™¨]               â”‚
â”‚ [ğŸ¨ å‚³é€æ¸¬è©¦åœ–æ¡ˆ]               â”‚
â”‚ [ğŸ—‘ï¸ æ¸…é™¤è¢å¹•]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [é€²åº¦æ¢]                        â”‚
â”‚ [ç‹€æ…‹è¨Šæ¯]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ æ³¨æ„äº‹é …

### 1. é˜²ç«ç‰†è¨­å®š

**Windows**:
- é¦–æ¬¡åŸ·è¡Œå¯èƒ½æœƒå½ˆå‡ºé˜²ç«ç‰†è­¦å‘Š
- é»æ“Šã€Œå…è¨±å­˜å–ã€
- æˆ–æ‰‹å‹•é–‹æ”¾ port 8266 å’Œ 8080

**Linux**:
```bash
sudo ufw allow 8266
sudo ufw allow 8080
```

### 2. ç¶²è·¯è¨­å®š

- ESP8266ã€Server å¿…é ˆåœ¨**åŒä¸€ç¶²æ®µ**
- å¦‚æœä½¿ç”¨æ‰‹æ©Ÿç†±é»ï¼ŒESP8266 è¦é€£æ¥åˆ°æ‰‹æ©Ÿç†±é»
- ç¢ºèª IP ä½å€æ­£ç¢º

### 3. ç€è¦½å™¨ç›¸å®¹æ€§

- âœ… Chrome/Edge (æ¨è–¦)
- âœ… Firefox
- âœ… Safari
- âš ï¸ èˆŠç‰ˆ IE ä¸æ”¯æ´

### 4. æ‰‹æ©Ÿæ•ˆèƒ½

- Termux åŸ·è¡Œ Python æœƒæ¶ˆè€—é›»åŠ›
- å»ºè­°åœ¨å……é›»æ™‚ä½¿ç”¨
- å¯ä½¿ç”¨ tmux èƒŒæ™¯åŸ·è¡Œ

---

## â“ å¸¸è¦‹å•é¡Œ

**Q1: Web UI å¯ä»¥å’Œå‘½ä»¤åˆ—åŒæ™‚ä½¿ç”¨å—ï¼Ÿ**
A: å¯ä»¥ï¼å…©è€…å®Œå…¨ç¨ç«‹ï¼Œäº’ä¸å½±éŸ¿ã€‚

**Q2: å¯ä»¥å¾å¤šå€‹ç€è¦½å™¨åŒæ™‚å­˜å–å—ï¼Ÿ**
A: å¯ä»¥ï¼æ”¯æ´å¤šå€‹ç€è¦½å™¨åŒæ™‚é–‹å•Ÿã€‚

**Q3: æ‰‹æ©ŸåŸ·è¡Œæœƒä¸æœƒå¾ˆæ…¢ï¼Ÿ**
A: å½±åƒè™•ç†éœ€è¦å¹¾ç§’é˜ï¼Œä½†æ•´é«”é«”é©—æµæš¢ã€‚

**Q4: å¯ä»¥é—œé–‰ç¶²é ç•Œé¢åªç”¨å‘½ä»¤åˆ—å—ï¼Ÿ**
A: å¯ä»¥ï¼ä½¿ç”¨åŸæœ¬çš„ `server.py` å³å¯ã€‚

**Q5: Termux é—œé–‰å¾Œ Server æœƒåœæ­¢å—ï¼Ÿ**
A: æœƒã€‚ä½¿ç”¨ tmux æˆ– Termux:Boot å¯ä¿æŒé‹è¡Œã€‚

**Q6: å¯ä»¥ç”¨ https å—ï¼Ÿ**
A: ç›®å‰æ˜¯ httpã€‚å¦‚éœ€ https éœ€è¦è¨­å®š SSL æ†‘è­‰ã€‚

**Q7: å¯ä»¥è¨­å®šå¯†ç¢¼ä¿è­·å—ï¼Ÿ**
A: ç›®å‰æ²’æœ‰ã€‚å»ºè­°åªåœ¨ä¿¡ä»»çš„ç¶²è·¯ä½¿ç”¨ã€‚

---

## ğŸ”„ æ›´æ–°

### å¾åŸ server.py é·ç§»

1. **å‚™ä»½**
   ```bash
   cp server.py server_backup.py
   ```

2. **ä½¿ç”¨æ–°ç‰ˆ**
   ```bash
   # ç›´æ¥ä½¿ç”¨ server_with_webui.py
   python server_with_webui.py
   ```

3. **å›åˆ°èˆŠç‰ˆ**
   ```bash
   # ä½¿ç”¨åŸæœ¬çš„ server.py
   python server.py
   ```

### ç‰ˆæœ¬å€åˆ¥

- `server.py` - åŸç‰ˆï¼Œå‘½ä»¤åˆ—
- `server_with_webui.py` - æ–°ç‰ˆï¼Œå‘½ä»¤åˆ— + Web UI

**å»ºè­°**ï¼šå¹³å¸¸ä½¿ç”¨ `server_with_webui.py`ï¼Œéœ€è¦ç´”å‘½ä»¤åˆ—æ™‚ç”¨ `server.py`

---

## ğŸ“š é€²éšä½¿ç”¨

### è‡ªè¨‚ Port

```python
# ä¿®æ”¹ server_with_webui.py æœ€å¾Œå¹¾è¡Œ
server = DisplayServer(
    host="0.0.0.0", 
    port=8266,      # WebSocket port
    http_port=8080  # HTTP portï¼ˆå¯æ”¹æˆå…¶ä»–ï¼‰
)
```

### é–‹æ©Ÿè‡ªå‹•å•Ÿå‹• (Termux)

```bash
# å®‰è£ Termux:Boot
# Google Play Store â†’ Termux:Boot

# å»ºç«‹å•Ÿå‹•è…³æœ¬
mkdir -p ~/.termux/boot
nano ~/.termux/boot/start_epaper.sh
```

å…§å®¹ï¼š
```bash
#!/data/data/com.termux/files/usr/bin/sh
cd ~/epaper_display/wifi_spi_display/server
python server_with_webui.py
```

è³¦äºˆåŸ·è¡Œæ¬Šé™ï¼š
```bash
chmod +x ~/.termux/boot/start_epaper.sh
```

### å»ºç«‹æ¡Œé¢æ·å¾‘ (Termux)

```bash
# å»ºç«‹å•Ÿå‹•è…³æœ¬
nano ~/start_epaper.sh
```

å…§å®¹ï¼š
```bash
#!/data/data/com.termux/files/usr/bin/bash
cd ~/epaper_display/wifi_spi_display/server
python server_with_webui.py
```

å»ºç«‹æ·å¾‘ï¼š
```bash
chmod +x ~/start_epaper.sh
termux-create-shortcut ~/start_epaper.sh -n "E-Paper Server"
```

---

## ğŸ¯ ç¸½çµ

### âœ… å„ªé»

- **é›™æ¨¡å¼**: Web UI + å‘½ä»¤åˆ—
- **è·¨å¹³å°**: PCã€æ‰‹æ©Ÿéƒ½èƒ½ç”¨
- **ç°¡å–®**: é»æ“Šé¸åœ–å³å¯
- **ç›¸å®¹**: å®Œå…¨å‘å¾Œç›¸å®¹
- **ç„¡ä¾è³´**: åªéœ€ aiohttp

### ğŸ“Œ ä½¿ç”¨å»ºè­°

- **é–‹ç™¼æ¸¬è©¦**: PC + Web UI
- **å±•ç¤º**: æ‰‹æ©Ÿ + Web UI
- **è‡ªå‹•åŒ–**: å‘½ä»¤åˆ—è…³æœ¬

---

éœ€è¦å”åŠ©å—ï¼Ÿ

- ğŸ“§ æäº¤ Issue åˆ° GitHub
- ğŸ’¬ æŸ¥çœ‹ `ANDROID_APP_OPTIONS.md`
- ğŸ“– é–±è®€ `MOBILE_INTEGRATION_PLAN.md`

ğŸš€ äº«å—ä½ çš„ ESP8266 é›»å­ç´™é¡¯ç¤ºå™¨ï¼
